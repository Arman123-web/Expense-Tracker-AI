{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/app/actions/addExpenseRecord.ts"],"sourcesContent":["\n'use server';\nimport { auth } from '@clerk/nextjs/server';\nimport { db } from '@/lib/db';\nimport { revalidatePath } from 'next/cache';\n\ninterface RecordData {\n  text: string;\n  amount: number;\n  category: string;\n  date: string; // Added date field\n}\n\ninterface RecordResult {\n  data?: RecordData;\n  error?: string;\n}\n\nasync function addExpenseRecord(formData: FormData): Promise<RecordResult> {\n  const textValue = formData.get('text');\n  const amountValue = formData.get('amount');\n  const categoryValue = formData.get('category');\n  const dateValue = formData.get('date'); // Extract date from formData\n\n  // Check for input values\n  if (\n    !textValue ||\n    textValue === '' ||\n    !amountValue ||\n    !categoryValue ||\n    categoryValue === '' ||\n    !dateValue ||\n    dateValue === ''\n  ) {\n    return { error: 'Text, amount, category, or date is missing' };\n  }\n\n  const text: string = textValue.toString(); // Ensure text is a string\n  const amount: number = parseFloat(amountValue.toString()); // Parse amount as number\n  const category: string = categoryValue.toString(); // Ensure category is a string\n  // Convert date to ISO-8601 format while preserving the user's input date\n  let date: string;\n  try {\n    // Parse the date string (YYYY-MM-DD format) and create a date at noon UTC to avoid timezone issues\n    const inputDate = dateValue.toString();\n    const [year, month, day] = inputDate.split('-');\n    const dateObj = new Date(\n      Date.UTC(parseInt(year), parseInt(month) - 1, parseInt(day), 12, 0, 0)\n    );\n    date = dateObj.toISOString();\n  } catch (error) {\n    console.error('Invalid date format:', error); // Log the error\n    return { error: 'Invalid date format' };\n  }\n\n  // Get logged in user\n  const { userId } = await auth();\n\n  // Check for user\n  if (!userId) {\n    return { error: 'User not found' };\n  }\n\n  try {\n    // Create a new record (allow multiple expenses per day)\n    const createdRecord = await db.record.create({\n      data: {\n        text,\n        amount,\n        category,\n        date, // Save the date to the database\n        userId,\n      },\n    });\n\n    const recordData: RecordData = {\n      text: createdRecord.text,\n      amount: createdRecord.amount,\n      category: createdRecord.category,\n      date: createdRecord.date?.toISOString() || date,\n    };\n\n    revalidatePath('/');\n\n    return { data: recordData };\n  } catch (error) {\n    console.error('Error adding expense record:', error); // Log the error\n    return {\n      error: 'An unexpected error occurred while adding the expense record.',\n    };\n  }\n}\n\nexport default addExpenseRecord;\n"],"names":[],"mappings":";;;;;;;2CA6Fe,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/app/actions/suggestCategory.ts"],"sourcesContent":["\n'use server';\n\nimport { categorizeExpense } from '@/lib/ai';\n\nexport async function suggestCategory(\n  description: string\n): Promise<{ category: string; error?: string }> {\n  try {\n    if (!description || description.trim().length < 2) {\n      return {\n        category: 'Other',\n        error: 'Description too short for AI analysis',\n      };\n    }\n\n    const category = await categorizeExpense(description.trim());\n    return { category };\n  } catch (error) {\n    console.error('‚ùå Error in suggestCategory server action:', error);\n    return {\n      category: 'Other',\n      error: 'Unable to suggest category at this time',\n    };\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAKsB,kBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/components/AddNewRecord.tsx"],"sourcesContent":["\n'use client';\nimport { useRef, useState } from 'react';\nimport addExpenseRecord from '@/app/actions/addExpenseRecord';\nimport { suggestCategory } from '@/app/actions/suggestCategory';\n\nconst AddRecord = () => {\n  const formRef = useRef<HTMLFormElement>(null);\n  const [amount, setAmount] = useState(50); // Default value for expense amount\n  const [alertMessage, setAlertMessage] = useState<string | null>(null); // State for alert message\n  const [alertType, setAlertType] = useState<'success' | 'error' | null>(null); // State for alert type\n  const [isLoading, setIsLoading] = useState(false); // State for loading spinner\n  const [category, setCategory] = useState(''); // State for selected expense category\n  const [description, setDescription] = useState(''); // State for expense description\n  const [isCategorizingAI, setIsCategorizingAI] = useState(false); // State for AI categorization loading\n\n  const clientAction = async (formData: FormData) => {\n    setIsLoading(true); // Show spinner\n    setAlertMessage(null); // Clear previous messages\n\n    formData.set('amount', amount.toString()); // Add the amount value to the form data\n    formData.set('category', category); // Add the selected category to the form data\n\n    const { error } = await addExpenseRecord(formData); // Removed `data` since it's unused\n\n    if (error) {\n      setAlertMessage(`Error: ${error}`);\n      setAlertType('error'); // Set alert type to error\n    } else {\n      setAlertMessage('Expense record added successfully!');\n      setAlertType('success'); // Set alert type to success\n      formRef.current?.reset();\n      setAmount(50); // Reset the amount to the default value\n      setCategory(''); // Reset the category\n      setDescription(''); // Reset the description\n    }\n\n    setIsLoading(false); // Hide spinner\n  };\n\n  const handleAISuggestCategory = async () => {\n    if (!description.trim()) {\n      setAlertMessage('Please enter a description first');\n      setAlertType('error');\n      return;\n    }\n\n    setIsCategorizingAI(true);\n    setAlertMessage(null);\n\n    try {\n      const result = await suggestCategory(description);\n      if (result.error) {\n        setAlertMessage(`AI Suggestion: ${result.error}`);\n        setAlertType('error');\n      } else {\n        setCategory(result.category);\n        setAlertMessage(`AI suggested category: ${result.category}`);\n        setAlertType('success');\n      }\n    } catch {\n      setAlertMessage('Failed to get AI category suggestion');\n      setAlertType('error');\n    } finally {\n      setIsCategorizingAI(false);\n    }\n  };\n\n  return (\n    <div className='bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-100/50 dark:border-gray-700/50 hover:shadow-2xl'>\n      <div className='flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6'>\n        <div className='w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-emerald-500 via-green-500 to-teal-500 rounded-xl flex items-center justify-center shadow-lg'>\n          <span className='text-white text-sm sm:text-lg'>üí≥</span>\n        </div>\n        <div>\n          <h3 className='text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100 leading-tight'>\n            Add New Expense\n          </h3>\n          <p className='text-xs text-gray-500 dark:text-gray-400 mt-0.5'>\n            Track your spending with AI assistance\n          </p>\n        </div>\n      </div>\n      <form\n        ref={formRef}\n        onSubmit={(e) => {\n          e.preventDefault();\n          const formData = new FormData(formRef.current!);\n          clientAction(formData);\n        }}\n        className='space-y-6 sm:space-y-8'\n      >\n        {/* Expense Description and Date */}\n        <div className='grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 p-3 sm:p-4 bg-gradient-to-r from-emerald-50/50 to-green-50/50 dark:from-emerald-900/10 dark:to-green-900/10 rounded-xl border border-emerald-100/50 dark:border-emerald-800/50'>\n          {/* Expense Description */}\n          <div className='space-y-1.5'>\n            <label\n              htmlFor='text'\n              className='flex items-center gap-2 text-xs font-semibold text-gray-700 dark:text-gray-300 tracking-wide'\n            >\n              <span className='w-1.5 h-1.5 bg-emerald-500 rounded-full'></span>\n              Expense Description\n            </label>\n            <div className='relative'>\n              <input\n                type='text'\n                id='text'\n                name='text'\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                className='w-full pl-3 pr-12 sm:pr-14 py-2.5 bg-white/70 dark:bg-gray-800/70 border-2 border-gray-200/80 dark:border-gray-600/80 rounded-xl focus:ring-2 focus:ring-emerald-500/30 focus:bg-white dark:focus:bg-gray-700/90 focus:border-emerald-400 dark:focus:border-emerald-400 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 text-sm shadow-sm hover:shadow-md transition-all duration-200'\n                placeholder='Coffee, groceries, gas...'\n                required\n              />\n              <button\n                type='button'\n                onClick={handleAISuggestCategory}\n                disabled={isCategorizingAI || !description.trim()}\n                className='absolute right-2 top-1/2 -translate-y-1/2 w-7 h-7 sm:w-8 sm:h-7 bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 disabled:from-gray-300 disabled:to-gray-300 text-white rounded-lg text-xs font-medium flex items-center justify-center shadow-lg hover:shadow-xl disabled:shadow-none transition-all duration-200'\n                title='AI Category Suggestion'\n              >\n                {isCategorizingAI ? (\n                  <div className='w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin'></div>\n                ) : (\n                  <span className='text-xs'>‚ú®</span>\n                )}\n              </button>\n            </div>\n            {isCategorizingAI && (\n              <div className='flex items-center gap-2 text-xs text-emerald-600 dark:text-emerald-400'>\n                <div className='w-1.5 h-1.5 bg-emerald-500 dark:bg-emerald-400 rounded-full animate-pulse'></div>\n                AI is analyzing your description...\n              </div>\n            )}\n          </div>\n\n          {/* Expense Date */}\n          <div className='space-y-1.5'>\n            <label\n              htmlFor='date'\n              className='flex items-center gap-2 text-xs font-semibold text-gray-700 dark:text-gray-300 tracking-wide'\n            >\n              <span className='w-1.5 h-1.5 bg-green-500 rounded-full'></span>\n              Expense Date\n            </label>\n            <input\n              type='date'\n              name='date'\n              id='date'\n              className='w-full px-3 py-2.5 bg-white/70 dark:bg-gray-800/70 border-2 border-gray-200/80 dark:border-gray-600/80 rounded-xl focus:ring-2 focus:ring-emerald-500/30 focus:bg-white dark:focus:bg-gray-700/90 focus:border-emerald-400 dark:focus:border-emerald-400 text-gray-900 dark:text-gray-100 text-sm shadow-sm hover:shadow-md transition-all duration-200'\n              required\n              onFocus={(e) => e.target.showPicker()}\n            />\n          </div>\n        </div>\n\n        {/* Category Selection and Amount */}\n        <div className='grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 p-3 sm:p-4 bg-gradient-to-r from-green-50/50 to-emerald-50/50 dark:from-green-900/10 dark:to-emerald-900/10 rounded-xl border border-green-100/50 dark:border-green-800/50'>\n          {/* Category Selection */}\n          <div className='space-y-1.5'>\n            <label\n              htmlFor='category'\n              className='flex items-center gap-2 text-xs font-semibold text-gray-700 dark:text-gray-300 tracking-wide'\n            >\n              <span className='w-1.5 h-1.5 bg-green-500 rounded-full'></span>\n              Category\n              <span className='text-xs text-gray-400 dark:text-gray-500 ml-2 font-normal hidden sm:inline'>\n                Use the ‚ú® button above for AI suggestions\n              </span>\n            </label>\n            <select\n              id='category'\n              name='category'\n              value={category}\n              onChange={(e) => setCategory(e.target.value)}\n              className='w-full px-3 py-2.5 bg-white/70 dark:bg-gray-800/70 border-2 border-gray-200/80 dark:border-gray-600/80 rounded-xl focus:ring-2 focus:ring-emerald-500/30 focus:bg-white dark:focus:bg-gray-700/90 focus:border-emerald-400 dark:focus:border-emerald-400 text-gray-900 dark:text-gray-100 cursor-pointer text-sm shadow-sm hover:shadow-md transition-all duration-200'\n              required\n            >\n              <option\n                value=''\n                disabled\n                className='text-gray-400 dark:text-gray-500'\n              >\n                Select category...\n              </option>\n              <option value='Food' className='text-gray-900 dark:text-gray-100'>\n                üçî Food & Dining\n              </option>\n              <option\n                value='Transportation'\n                className='text-gray-900 dark:text-gray-100'\n              >\n                üöó Transportation\n              </option>\n              <option\n                value='Shopping'\n                className='text-gray-900 dark:text-gray-100'\n              >\n                üõí Shopping\n              </option>\n              <option\n                value='Entertainment'\n                className='text-gray-900 dark:text-gray-100'\n              >\n                üé¨ Entertainment\n              </option>\n              <option\n                value='Bills'\n                className='text-gray-900 dark:text-gray-100'\n              >\n                üí° Bills & Utilities\n              </option>\n              <option\n                value='Healthcare'\n                className='text-gray-900 dark:text-gray-100'\n              >\n                üè• Healthcare\n              </option>\n              <option\n                value='Other'\n                className='text-gray-900 dark:text-gray-100'\n              >\n                üì¶ Other\n              </option>\n            </select>\n          </div>\n\n          {/* Amount */}\n          <div className='space-y-1.5'>\n            <label\n              htmlFor='amount'\n              className='flex items-center gap-2 text-xs font-semibold text-gray-700 dark:text-gray-300 tracking-wide'\n            >\n              <span className='w-1.5 h-1.5 bg-green-500 rounded-full'></span>\n              Amount\n              <span className='text-xs text-gray-400 dark:text-gray-500 ml-2 font-normal hidden sm:inline'>\n                Enter amount between $0 and $1,000\n              </span>\n            </label>\n            <div className='relative'>\n              <span className='absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 font-medium text-sm'>\n                $\n              </span>\n              <input\n                type='number'\n                name='amount'\n                id='amount'\n                min='0'\n                max='1000'\n                step='0.01'\n                value={amount}\n                onChange={(e) => setAmount(parseFloat(e.target.value) || 0)}\n                className='w-full pl-6 pr-3 py-2.5 bg-white/70 dark:bg-gray-800/70 border-2 border-gray-200/80 dark:border-gray-600/80 rounded-xl focus:ring-2 focus:ring-emerald-500/30 focus:bg-white dark:focus:bg-gray-700/90 focus:border-emerald-400 dark:focus:border-emerald-400 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 text-sm font-semibold shadow-sm hover:shadow-md transition-all duration-200'\n                placeholder='0.00'\n                required\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Submit Button */}\n        <button\n          type='submit'\n          className='w-full relative overflow-hidden bg-gradient-to-r from-emerald-600 via-green-500 to-teal-500 hover:from-emerald-700 hover:via-green-600 hover:to-teal-600 text-white px-4 py-3 sm:px-5 sm:py-4 rounded-xl font-semibold shadow-xl hover:shadow-2xl group transition-all duration-300 border-2 border-transparent hover:border-white/20 text-sm sm:text-base'\n          disabled={isLoading}\n        >\n          <div className='relative flex items-center justify-center gap-2'>\n            {isLoading ? (\n              <>\n                <div className='w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin'></div>\n                <span>Processing...</span>\n              </>\n            ) : (\n              <>\n                <span className='text-lg'>üí´</span>\n                <span>Add Expense</span>\n              </>\n            )}\n          </div>\n        </button>\n      </form>\n\n      {/* Alert Message */}\n      {alertMessage && (\n        <div\n          className={`mt-4 p-3 rounded-xl border-l-4 backdrop-blur-sm ${\n            alertType === 'success'\n              ? 'bg-green-50/80 dark:bg-green-900/20 border-l-green-500 text-green-800 dark:text-green-200'\n              : 'bg-red-50/80 dark:bg-red-900/20 border-l-red-500 text-red-800 dark:text-red-200'\n          }`}\n        >\n          <div className='flex items-center gap-2'>\n            <div\n              className={`w-6 h-6 rounded-full flex items-center justify-center ${\n                alertType === 'success'\n                  ? 'bg-green-100 dark:bg-green-800'\n                  : 'bg-red-100 dark:bg-red-800'\n              }`}\n            >\n              <span className='text-sm'>\n                {alertType === 'success' ? '‚úÖ' : '‚ö†Ô∏è'}\n              </span>\n            </div>\n            <p className='font-medium text-sm'>{alertMessage}</p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AddRecord;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 604, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/app/actions/getAIInsights.ts"],"sourcesContent":["\n'use server';\n\nimport { checkUser } from '@/lib/checkUser';\nimport { db } from '@/lib/db';\nimport { generateExpenseInsights, AIInsight, ExpenseRecord } from '@/lib/ai';\n\nexport async function getAIInsights(): Promise<AIInsight[]> {\n  try {\n    const user = await checkUser();\n    if (!user) {\n      throw new Error('User not authenticated');\n    }\n\n    // Get user's recent expenses (last 30 days)\n    const thirtyDaysAgo = new Date();\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n    const expenses = await db.record.findMany({\n      where: {\n        userId: user.clerkUserId,\n        createdAt: {\n          gte: thirtyDaysAgo,\n        },\n      },\n      orderBy: {\n        createdAt: 'desc',\n      },\n      take: 50, // Limit to recent 50 expenses for analysis\n    });\n\n    if (expenses.length === 0) {\n      // Return default insights for new users\n      return [\n        {\n          id: 'welcome-1',\n          type: 'info',\n          title: 'Welcome to ExpenseTracker AI!',\n          message:\n            'Start adding your expenses to get personalized AI insights about your spending patterns.',\n          action: 'Add your first expense',\n          confidence: 1.0,\n        },\n        {\n          id: 'welcome-2',\n          type: 'tip',\n          title: 'Track Regularly',\n          message:\n            'For best results, try to log expenses daily. This helps our AI provide more accurate insights.',\n          action: 'Set daily reminders',\n          confidence: 1.0,\n        },\n      ];\n    }\n\n    // Convert to format expected by AI\n    const expenseData: ExpenseRecord[] = expenses.map((expense) => ({\n      id: expense.id,\n      amount: expense.amount,\n      category: expense.category || 'Other',\n      description: expense.text,\n      date: expense.createdAt.toISOString(),\n    }));\n\n    // Generate AI insights\n    const insights = await generateExpenseInsights(expenseData);\n    return insights;\n  } catch (error) {\n    console.error('Error getting AI insights:', error);\n\n    // Return fallback insights\n    return [\n      {\n        id: 'error-1',\n        type: 'warning',\n        title: 'Insights Temporarily Unavailable',\n        message:\n          \"We're having trouble analyzing your expenses right now. Please try again in a few minutes.\",\n        action: 'Retry analysis',\n        confidence: 0.5,\n      },\n    ];\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAOsB,gBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/app/actions/generateInsightAnswer.ts"],"sourcesContent":["\n'use server';\n\nimport { checkUser } from '@/lib/checkUser';\nimport { db } from '@/lib/db';\nimport { generateAIAnswer, ExpenseRecord } from '@/lib/ai';\n\nexport async function generateInsightAnswer(question: string): Promise<string> {\n  try {\n    const user = await checkUser();\n    if (!user) {\n      throw new Error('User not authenticated');\n    }\n\n    // Get user's recent expenses (last 30 days)\n    const thirtyDaysAgo = new Date();\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n    const expenses = await db.record.findMany({\n      where: {\n        userId: user.clerkUserId,\n        createdAt: {\n          gte: thirtyDaysAgo,\n        },\n      },\n      orderBy: {\n        createdAt: 'desc',\n      },\n      take: 50, // Limit to recent 50 expenses for analysis\n    });\n\n    // Convert to format expected by AI\n    const expenseData: ExpenseRecord[] = expenses.map((expense) => ({\n      id: expense.id,\n      amount: expense.amount,\n      category: expense.category || 'Other',\n      description: expense.text,\n      date: expense.createdAt.toISOString(),\n    }));\n\n    // Generate AI answer\n    const answer = await generateAIAnswer(question, expenseData);\n    return answer;\n  } catch (error) {\n    console.error('Error generating insight answer:', error);\n    return \"I'm unable to provide a detailed answer at the moment. Please try refreshing the insights or check your connection.\";\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAOsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 628, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/components/AIInsights.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { getAIInsights } from '@/app/actions/getAIInsights';\nimport { generateInsightAnswer } from '@/app/actions/generateInsightAnswer';\n\ninterface InsightData {\n  id: string;\n  type: 'warning' | 'info' | 'success' | 'tip';\n  title: string;\n  message: string;\n  action?: string;\n  confidence?: number;\n}\n\ninterface AIAnswer {\n  insightId: string;\n  answer: string;\n  isLoading: boolean;\n}\n\nconst AIInsights = () => {\n  const [insights, setInsights] = useState<InsightData[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\n  const [aiAnswers, setAiAnswers] = useState<AIAnswer[]>([]);\n\n  const loadInsights = async () => {\n    setIsLoading(true);\n    try {\n      const newInsights = await getAIInsights();\n      setInsights(newInsights);\n      setLastUpdated(new Date());\n    } catch (error) {\n      console.error('‚ùå AIInsights: Failed to load AI insights:', error);\n      // Fallback to mock data if AI fails\n      setInsights([\n        {\n          id: 'fallback-1',\n          type: 'info',\n          title: 'AI Temporarily Unavailable',\n          message:\n            \"We're working to restore AI insights. Please check back soon.\",\n          action: 'Try again later',\n        },\n      ]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleActionClick = async (insight: InsightData) => {\n    if (!insight.action) return;\n\n    // Check if answer is already loading or exists\n    const existingAnswer = aiAnswers.find((a) => a.insightId === insight.id);\n    if (existingAnswer) {\n      // Remove the answer if it already exists (toggle functionality)\n      setAiAnswers((prev) => prev.filter((a) => a.insightId !== insight.id));\n      return;\n    }\n\n    // Add loading state\n    setAiAnswers((prev) => [\n      ...prev,\n      {\n        insightId: insight.id,\n        answer: '',\n        isLoading: true,\n      },\n    ]);\n\n    try {\n      // Generate question based on insight title and action\n      const question = `${insight.title}: ${insight.action}`;\n\n      // Use server action to generate AI answer\n      const answer = await generateInsightAnswer(question);\n\n      setAiAnswers((prev) =>\n        prev.map((a) =>\n          a.insightId === insight.id ? { ...a, answer, isLoading: false } : a\n        )\n      );\n    } catch (error) {\n      console.error('‚ùå Failed to generate AI answer:', error);\n      setAiAnswers((prev) =>\n        prev.map((a) =>\n          a.insightId === insight.id\n            ? {\n                ...a,\n                answer:\n                  'Sorry, I was unable to generate a detailed answer. Please try again.',\n                isLoading: false,\n              }\n            : a\n        )\n      );\n    }\n  };\n\n  useEffect(() => {\n    loadInsights();\n  }, []);\n\n  const getInsightIcon = (type: string) => {\n    switch (type) {\n      case 'warning':\n        return '‚ö†Ô∏è';\n      case 'success':\n        return '‚úÖ';\n      case 'tip':\n        return 'üí°';\n      case 'info':\n        return '‚ÑπÔ∏è';\n      default:\n        return 'ü§ñ';\n    }\n  };\n\n  const getInsightColors = (type: string) => {\n    switch (type) {\n      case 'warning':\n        return 'border-l-yellow-500 bg-yellow-50 dark:bg-yellow-900/20';\n      case 'success':\n        return 'border-l-green-500 bg-green-50 dark:bg-green-900/20';\n      case 'tip':\n        return 'border-l-emerald-500 bg-emerald-50 dark:bg-emerald-900/20';\n      case 'info':\n        return 'border-l-emerald-500 bg-emerald-50 dark:bg-emerald-900/20';\n      default:\n        return 'border-l-gray-500 bg-gray-50 dark:bg-gray-800/50';\n    }\n  };\n\n  const getButtonColors = (type: string) => {\n    switch (type) {\n      case 'warning':\n        return 'text-yellow-700 dark:text-yellow-300 hover:text-yellow-800 dark:hover:text-yellow-200';\n      case 'success':\n        return 'text-green-700 dark:text-green-300 hover:text-green-800 dark:hover:text-green-200';\n      case 'tip':\n        return 'text-emerald-700 dark:text-emerald-300 hover:text-emerald-800 dark:hover:text-emerald-200';\n      case 'info':\n        return 'text-emerald-700 dark:text-emerald-300 hover:text-emerald-800 dark:hover:text-emerald-200';\n      default:\n        return 'text-gray-700 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-200';\n    }\n  };\n\n  const formatLastUpdated = () => {\n    if (!lastUpdated) return 'Loading...';\n\n    const now = new Date();\n    const diffMs = now.getTime() - lastUpdated.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins}m ago`;\n\n    const diffHours = Math.floor(diffMins / 60);\n    if (diffHours < 24) return `${diffHours}h ago`;\n\n    return lastUpdated.toLocaleDateString();\n  };\n\n  if (isLoading) {\n    return (\n      <div className='bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-100/50 dark:border-gray-700/50'>\n        <div className='flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6'>\n          <div className='w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-emerald-500 via-green-500 to-teal-500 rounded-xl flex items-center justify-center shadow-lg'>\n            <span className='text-white text-sm sm:text-lg'>ü§ñ</span>\n          </div>\n          <div className='flex-1'>\n            <h3 className='text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100'>\n              AI Insights\n            </h3>\n            <p className='text-xs text-gray-500 dark:text-gray-400 mt-0.5'>\n              Analyzing your spending patterns\n            </p>\n          </div>\n          <div className='flex items-center gap-1 sm:gap-2'>\n            <div className='w-5 h-5 sm:w-6 sm:h-6 border-2 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin'></div>\n            <span className='text-xs sm:text-sm text-emerald-600 dark:text-emerald-400 font-medium hidden sm:block'>\n              Analyzing...\n            </span>\n          </div>\n        </div>\n\n        <div className='space-y-3 sm:space-y-4'>\n          {[1, 2, 3].map((i) => (\n            <div\n              key={i}\n              className='animate-pulse bg-gradient-to-r from-gray-100 to-gray-50 dark:from-gray-700 dark:to-gray-800 p-3 sm:p-4 rounded-xl border border-gray-100 dark:border-gray-600'\n            >\n              <div className='flex items-start gap-3 sm:gap-4'>\n                <div className='w-6 h-6 sm:w-8 sm:h-8 bg-gray-200 dark:bg-gray-600 rounded-lg'></div>\n                <div className='flex-1 space-y-2'>\n                  <div className='h-3 bg-gray-200 dark:bg-gray-600 rounded-lg w-3/4'></div>\n                  <div className='h-3 bg-gray-200 dark:bg-gray-600 rounded-lg w-full'></div>\n                  <div className='h-3 bg-gray-200 dark:bg-gray-600 rounded-lg w-2/3'></div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className='mt-4 sm:mt-6 pt-3 sm:pt-4 border-t border-gray-100 dark:border-gray-700 text-center'>\n          <div className='flex items-center justify-center gap-2 text-sm text-gray-500 dark:text-gray-400'>\n            <div className='w-1.5 h-1.5 bg-emerald-500 dark:bg-emerald-400 rounded-full animate-pulse'></div>\n            <span className='text-xs sm:text-sm'>\n              AI is analyzing your financial patterns...\n            </span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className='bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-xl border border-gray-100/50 dark:border-gray-700/50 hover:shadow-2xl'>\n      <div className='flex items-center justify-between mb-4 sm:mb-6'>\n        <div className='flex items-center gap-2 sm:gap-3'>\n          <div className='w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-emerald-500 via-green-500 to-teal-500 rounded-xl flex items-center justify-center shadow-lg'>\n            <span className='text-white text-sm sm:text-lg'>ü§ñ</span>\n          </div>\n          <div>\n            <h3 className='text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100'>\n              AI Insights\n            </h3>\n            <p className='text-xs text-gray-500 dark:text-gray-400 mt-0.5'>\n              AI financial analysis\n            </p>\n          </div>\n        </div>\n        <div className='flex items-center gap-2 sm:gap-3'>\n          <div className='inline-flex items-center gap-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 px-2 py-1 rounded-full text-xs font-medium'>\n            <span className='w-1.5 h-1.5 bg-emerald-500 dark:bg-emerald-400 rounded-full'></span>\n            <span className='hidden sm:inline'>{formatLastUpdated()}</span>\n            <span className='sm:hidden'>\n              {formatLastUpdated().includes('ago')\n                ? formatLastUpdated().replace(' ago', '')\n                : formatLastUpdated()}\n            </span>\n          </div>\n          <button\n            onClick={loadInsights}\n            className='w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-r from-emerald-600 via-green-500 to-teal-500 hover:from-emerald-700 hover:via-green-600 hover:to-teal-600 text-white rounded-xl flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200'\n            disabled={isLoading}\n          >\n            <span className='text-sm'>üîÑ</span>\n          </button>\n        </div>\n      </div>\n\n      <div className='grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4'>\n        {insights.map((insight) => {\n          const currentAnswer = aiAnswers.find(\n            (a) => a.insightId === insight.id\n          );\n\n          return (\n            <div\n              key={insight.id}\n              className={`relative overflow-hidden rounded-xl p-3 sm:p-4 border-l-4 hover:shadow-lg transition-all duration-200 ${getInsightColors(\n                insight.type\n              )}`}\n            >\n              <div className='flex items-start justify-between'>\n                <div className='flex-1'>\n                  <div className='flex items-center gap-2 sm:gap-3 mb-2'>\n                    <div\n                      className={`w-6 h-6 sm:w-8 sm:h-8 rounded-lg flex items-center justify-center ${\n                        insight.type === 'warning'\n                          ? 'bg-yellow-100 dark:bg-yellow-900/50'\n                          : insight.type === 'success'\n                          ? 'bg-green-100 dark:bg-green-900/50'\n                          : insight.type === 'tip'\n                          ? 'bg-emerald-100 dark:bg-emerald-900/50'\n                          : 'bg-emerald-100 dark:bg-emerald-900/50'\n                      }`}\n                    >\n                      <span className='text-sm sm:text-lg'>\n                        {getInsightIcon(insight.type)}\n                      </span>\n                    </div>\n                    <div className='flex-1'>\n                      <h4 className='font-bold text-gray-900 dark:text-gray-100 text-sm mb-0.5'>\n                        {insight.title}\n                      </h4>\n                      {insight.confidence && insight.confidence < 0.8 && (\n                        <span className='inline-block px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300 rounded-full text-xs font-medium'>\n                          Preliminary\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                  <p className='text-gray-700 dark:text-gray-300 text-xs leading-relaxed mb-3'>\n                    {insight.message}\n                  </p>\n                  {insight.action && (\n                    <div className='text-left'>\n                      <span\n                        onClick={() => handleActionClick(insight)}\n                        className={`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg font-medium text-xs cursor-pointer transition-all duration-200 ${getButtonColors(\n                          insight.type\n                        )} hover:bg-white/50 dark:hover:bg-gray-700/50 ${\n                          currentAnswer ? 'bg-white/50 dark:bg-gray-700/50' : ''\n                        }`}\n                      >\n                        <span>{insight.action}</span>\n                        {currentAnswer?.isLoading ? (\n                          <div className='w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin'></div>\n                        ) : (\n                          <span className='text-xs'>\n                            {currentAnswer ? '‚Üë' : '‚Üí'}\n                          </span>\n                        )}\n                      </span>\n                    </div>\n                  )}\n\n                  {/* AI Answer Display */}\n                  {currentAnswer && (\n                    <div className='mt-3 p-3 bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-lg border border-gray-200 dark:border-gray-600'>\n                      <div className='flex items-start gap-2'>\n                        <div className='w-5 h-5 sm:w-6 sm:h-6 bg-gradient-to-br from-emerald-500 via-green-500 to-teal-500 rounded-lg flex items-center justify-center flex-shrink-0'>\n                          <span className='text-white text-xs'>ü§ñ</span>\n                        </div>\n                        <div className='flex-1'>\n                          <h5 className='font-semibold text-gray-900 dark:text-gray-100 text-xs mb-1'>\n                            AI Answer:\n                          </h5>\n                          {currentAnswer.isLoading ? (\n                            <div className='space-y-1'>\n                              <div className='animate-pulse bg-gray-200 dark:bg-gray-600 h-2 rounded-lg w-full'></div>\n                              <div className='animate-pulse bg-gray-200 dark:bg-gray-600 h-2 rounded-lg w-3/4'></div>\n                              <div className='animate-pulse bg-gray-200 dark:bg-gray-600 h-2 rounded-lg w-1/2'></div>\n                            </div>\n                          ) : (\n                            <p className='text-gray-700 dark:text-gray-300 text-xs leading-relaxed'>\n                              {currentAnswer.answer}\n                            </p>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      <div className='mt-4 sm:mt-6 pt-3 sm:pt-4 border-t border-gray-100 dark:border-gray-700'>\n        <div className='flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-0'>\n          <div className='flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400'>\n            <div className='w-5 h-5 sm:w-6 sm:h-6 bg-emerald-50 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center'>\n              <span className='text-sm'>üß†</span>\n            </div>\n            <span className='font-medium text-xs'>Powered by AI analysis</span>\n          </div>\n          <button\n            onClick={loadInsights}\n            className='px-3 py-1.5 bg-gradient-to-r from-emerald-600 via-green-500 to-teal-500 hover:from-emerald-700 hover:via-green-600 hover:to-teal-600 text-white rounded-lg font-medium text-xs shadow-lg hover:shadow-xl transition-all duration-200'\n          >\n            <span className='sm:hidden'>Refresh</span>\n            <span className='hidden sm:inline'>Refresh Insights ‚Üí</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AIInsights;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1357, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/components/BarChart.tsx"],"sourcesContent":["'use client';\n\nimport { Bar } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { useTheme } from '@/contexts/themeContexts';\nimport { useState, useEffect } from 'react';\n\n// Register Chart.js components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\n// Define the type for a record\ninterface Record {\n  date: string; // ISO date string\n  amount: number; // Amount spent\n  category: string; // Expense category\n}\n\nconst BarChart = ({ records }: { records: Record[] }) => {\n  const { theme } = useTheme();\n  const isDark = theme === 'dark';\n  const [windowWidth, setWindowWidth] = useState(1024); // Default to desktop width\n\n  useEffect(() => {\n    // Set initial window width\n    setWindowWidth(window.innerWidth);\n\n    // Add resize listener\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const isMobile = windowWidth < 640;\n\n  // Aggregate expenses by date\n  const aggregateByDate = (records: Record[]) => {\n    const dateMap = new Map<\n      string,\n      { total: number; categories: string[]; originalDate: string }\n    >();\n\n    records.forEach((record) => {\n      // Parse the date string properly and extract just the date part (YYYY-MM-DD)\n      const dateObj = new Date(record.date);\n      // Use UTC methods to avoid timezone issues\n      const year = dateObj.getUTCFullYear();\n      const month = String(dateObj.getUTCMonth() + 1).padStart(2, '0');\n      const day = String(dateObj.getUTCDate()).padStart(2, '0');\n      const dateKey = `${year}-${month}-${day}`;\n      const existing = dateMap.get(dateKey);\n\n      if (existing) {\n        existing.total += record.amount;\n        if (!existing.categories.includes(record.category)) {\n          existing.categories.push(record.category);\n        }\n      } else {\n        dateMap.set(dateKey, {\n          total: record.amount,\n          categories: [record.category],\n          originalDate: record.date, // Keep original ISO date for sorting\n        });\n      }\n    });\n\n    // Convert to array and sort by date (oldest to newest)\n    return Array.from(dateMap.entries())\n      .map(([date, data]) => ({\n        date,\n        amount: data.total,\n        categories: data.categories,\n        originalDate: data.originalDate,\n      }))\n      .sort(\n        (a, b) =>\n          new Date(a.originalDate).getTime() -\n          new Date(b.originalDate).getTime()\n      );\n  };\n\n  const aggregatedData = aggregateByDate(records);\n\n  // Get color based on amount (since we're aggregating multiple categories)\n  const getAmountColor = (amount: number) => {\n    if (amount > 200)\n      return {\n        bg: isDark ? 'rgba(255, 99, 132, 0.3)' : 'rgba(255, 99, 132, 0.2)',\n        border: isDark ? 'rgba(255, 99, 132, 0.8)' : 'rgba(255, 99, 132, 1)',\n      }; // Red for high spending\n    if (amount > 100)\n      return {\n        bg: isDark ? 'rgba(255, 206, 86, 0.3)' : 'rgba(255, 206, 86, 0.2)',\n        border: isDark ? 'rgba(255, 206, 86, 0.8)' : 'rgba(255, 206, 86, 1)',\n      }; // Yellow for medium spending\n    if (amount > 50)\n      return {\n        bg: isDark ? 'rgba(54, 162, 235, 0.3)' : 'rgba(54, 162, 235, 0.2)',\n        border: isDark ? 'rgba(54, 162, 235, 0.8)' : 'rgba(54, 162, 235, 1)',\n      }; // Blue for moderate spending\n    return {\n      bg: isDark ? 'rgba(75, 192, 192, 0.3)' : 'rgba(75, 192, 192, 0.2)',\n      border: isDark ? 'rgba(75, 192, 192, 0.8)' : 'rgba(75, 192, 192, 1)',\n    }; // Green for low spending\n  };\n\n  // Prepare data for the chart\n  const data = {\n    labels: aggregatedData.map((item) => {\n      // Format date as MM/DD for better readability\n      const [, month, day] = item.date.split('-');\n      return `${month}/${day}`;\n    }),\n    datasets: [\n      {\n        data: aggregatedData.map((item) => item.amount),\n        backgroundColor: aggregatedData.map(\n          (item) => getAmountColor(item.amount).bg\n        ),\n        borderColor: aggregatedData.map(\n          (item) => getAmountColor(item.amount).border\n        ),\n        borderWidth: 1,\n        borderRadius: 2, // Rounded bar edges\n      },\n    ],\n  };\n\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false, // Allow flexible height\n    plugins: {\n      legend: {\n        display: false, // Remove legend\n      },\n      title: {\n        display: false, // Remove chart title\n      },\n      tooltip: {\n        backgroundColor: isDark\n          ? 'rgba(31, 41, 55, 0.95)'\n          : 'rgba(255, 255, 255, 0.95)',\n        titleColor: isDark ? '#f9fafb' : '#1f2937',\n        bodyColor: isDark ? '#d1d5db' : '#374151',\n        borderColor: isDark ? '#374151' : '#e5e7eb',\n        borderWidth: 1,\n        cornerRadius: 8,\n        callbacks: {\n          label: function (context: { dataIndex: number }) {\n            const dataIndex = context.dataIndex;\n            const item = aggregatedData[dataIndex];\n            const categoriesText =\n              item.categories.length > 1\n                ? `Categories: ${item.categories.join(', ')}`\n                : `Category: ${item.categories[0]}`;\n            return [`Total: $${item.amount.toFixed(2)}`, categoriesText];\n          },\n        },\n      },\n    },\n    scales: {\n      x: {\n        title: {\n          display: true,\n          text: 'Date',\n          font: {\n            size: isMobile ? 12 : 14,\n            weight: 'bold' as const,\n          },\n          color: isDark ? '#d1d5db' : '#2c3e50',\n        },\n        ticks: {\n          font: {\n            size: isMobile ? 10 : 12,\n          },\n          color: isDark ? '#9ca3af' : '#7f8c8d', // Gray x-axis labels\n          maxRotation: isMobile ? 45 : 0, // Rotate labels on mobile\n          minRotation: isMobile ? 45 : 0,\n        },\n        grid: {\n          display: false, // Hide x-axis grid lines\n        },\n      },\n      y: {\n        title: {\n          display: true,\n          text: 'Amount ($)',\n          font: {\n            size: isMobile ? 12 : 16, // Smaller font on mobile\n            weight: 'bold' as const,\n          },\n          color: isDark ? '#d1d5db' : '#2c3e50',\n        },\n        ticks: {\n          font: {\n            size: isMobile ? 10 : 12, // Smaller font on mobile\n          },\n          color: isDark ? '#9ca3af' : '#7f8c8d', // Gray y-axis labels\n          callback: function (value: string | number) {\n            return '$' + value; // Add dollar sign to y-axis labels\n          },\n        },\n        grid: {\n          color: isDark ? '#374151' : '#e0e0e0', // Dark mode grid lines\n        },\n        beginAtZero: true, // Start y-axis at zero for expenses\n      },\n    },\n  };\n\n  return (\n    <div className='relative w-full h-64 sm:h-72 md:h-80'>\n      <Bar data={data} options={options} />\n    </div>\n  );\n};\n\nexport default BarChart;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1561, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/app/actions/deleteRecord.ts"],"sourcesContent":["\n'use server';\nimport { db } from '@/lib/db';\nimport { auth } from '@clerk/nextjs/server';\nimport { revalidatePath } from 'next/cache';\n\nasync function deleteRecord(recordId: string): Promise<{\n  message?: string;\n  error?: string;\n}> {\n  const { userId } = await auth();\n\n  if (!userId) {\n    return { error: 'User not found' };\n  }\n\n  try {\n    await db.record.delete({\n      where: {\n        id: recordId,\n        userId,\n      },\n    });\n\n    revalidatePath('/');\n\n    return { message: 'Record deleted' };\n  } catch (error) {\n    console.error('Error deleting record:', error); // Log the error\n    return { error: 'Database error' };\n  }\n}\n\nexport default deleteRecord;\n"],"names":[],"mappings":";;;;;;;2CAiCe,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 1574, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/components/RecordItem.tsx"],"sourcesContent":["'use client';\nimport { useState } from 'react';\nimport { Record } from '@/types/Record';\nimport deleteRecord from '@/app/actions/deleteRecord';\n\n// Helper function to get category emoji\nconst getCategoryEmoji = (category: string) => {\n  switch (category) {\n    case 'Food':\n      return 'üçî';\n    case 'Transportation':\n      return 'üöó';\n    case 'Shopping':\n      return 'üõí';\n    case 'Entertainment':\n      return 'üé¨';\n    case 'Bills':\n      return 'üí°';\n    case 'Healthcare':\n      return 'üè•';\n    default:\n      return 'üì¶';\n  }\n};\n\nconst RecordItem = ({ record }: { record: Record }) => {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleDeleteRecord = async (recordId: string) => {\n    setIsLoading(true); // Show loading spinner\n    await deleteRecord(recordId); // Perform delete operation\n    setIsLoading(false); // Hide loading spinner\n  };\n\n  // Determine border color based on expense amount\n  const getBorderColor = (amount: number) => {\n    if (amount > 100) return 'border-red-500'; // High expense\n    if (amount > 50) return 'border-yellow-500'; // Medium expense\n    return 'border-green-500'; // Low expense\n  };\n\n  return (\n    <li\n      className={`bg-white/60 dark:bg-gray-700/60 backdrop-blur-sm p-4 sm:p-6 rounded-xl shadow-lg border border-gray-100/50 dark:border-gray-600/50 border-l-4 ${getBorderColor(\n        record?.amount\n      )} hover:bg-white/80 dark:hover:bg-gray-700/80 relative min-h-[120px] sm:min-h-[140px] flex flex-col justify-between overflow-visible group`}\n    >\n      {/* Delete button positioned absolutely in top-right corner */}\n      <button\n        onClick={() => handleDeleteRecord(record.id)}\n        className={`absolute -top-2 -right-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-full w-6 h-6 sm:w-7 sm:h-7 flex items-center justify-center shadow-lg hover:shadow-xl border-2 border-white dark:border-gray-700 backdrop-blur-sm transform hover:scale-110 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-200 ${\n          isLoading ? 'cursor-not-allowed scale-100' : ''\n        }`}\n        aria-label='Delete record'\n        disabled={isLoading} // Disable button while loading\n        title='Delete expense record'\n      >\n        {isLoading ? (\n          <div className='w-3 h-3 border border-white/30 border-t-white rounded-full animate-spin'></div>\n        ) : (\n          <svg\n            className='w-3 h-3 sm:w-4 sm:h-4'\n            fill='none'\n            stroke='currentColor'\n            viewBox='0 0 24 24'\n            xmlns='http://www.w3.org/2000/svg'\n          >\n            <path\n              strokeLinecap='round'\n              strokeLinejoin='round'\n              strokeWidth={2}\n              d='M6 18L18 6M6 6l12 12'\n            />\n          </svg>\n        )}\n      </button>\n\n      {/* Content area with proper spacing */}\n      <div className='flex-1 flex flex-col justify-between'>\n        <div className='space-y-2 sm:space-y-3'>\n          <div className='flex items-center justify-between'>\n            <span className='text-xs font-medium text-gray-500 dark:text-gray-400 tracking-wide uppercase'>\n              {new Date(record?.date).toLocaleDateString('en-us')}\n            </span>\n            <span className='text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100'>\n              ${record?.amount.toFixed(2)}\n            </span>\n          </div>\n\n          <div className='flex items-center gap-2'>\n            <span className='text-base sm:text-lg'>\n              {getCategoryEmoji(record?.category)}\n            </span>\n            <span className='text-sm font-medium text-gray-700 dark:text-gray-300'>\n              {record?.category}\n            </span>\n          </div>\n        </div>\n\n        <div className='text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-2'>\n          <p className='truncate break-words line-clamp-2'>{record?.text}</p>\n        </div>\n      </div>\n    </li>\n  );\n};\n\nexport default RecordItem;"],"names":[],"mappings":";;;;;AACA;AAEA;AAHA;;;;AAKA,wCAAwC;AACxC,MAAM,mBAAmB,CAAC;IACxB,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF;AAEA,MAAM,aAAa,CAAC,EAAE,MAAM,EAAsB;IAChD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,qBAAqB,OAAO;QAChC,aAAa,OAAO,uBAAuB;QAC3C,MAAM,IAAA,iKAAY,EAAC,WAAW,2BAA2B;QACzD,aAAa,QAAQ,uBAAuB;IAC9C;IAEA,iDAAiD;IACjD,MAAM,iBAAiB,CAAC;QACtB,IAAI,SAAS,KAAK,OAAO,kBAAkB,eAAe;QAC1D,IAAI,SAAS,IAAI,OAAO,qBAAqB,iBAAiB;QAC9D,OAAO,oBAAoB,cAAc;IAC3C;IAEA,qBACE,8OAAC;QACC,WAAW,CAAC,8IAA8I,EAAE,eAC1J,QAAQ,QACR,yIAAyI,CAAC;;0BAG5I,8OAAC;gBACC,SAAS,IAAM,mBAAmB,OAAO,EAAE;gBAC3C,WAAW,CAAC,qXAAqX,EAC/X,YAAY,iCAAiC,IAC7C;gBACF,cAAW;gBACX,UAAU;gBACV,OAAM;0BAEL,0BACC,8OAAC;oBAAI,WAAU;;;;;6EAEf,8OAAC;oBACC,WAAU;oBACV,MAAK;oBACL,QAAO;oBACP,SAAQ;oBACR,OAAM;8BAEN,cAAA,8OAAC;wBACC,eAAc;wBACd,gBAAe;wBACf,aAAa;wBACb,GAAE;;;;;;;;;;;;;;;;0BAOV,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDACb,IAAI,KAAK,QAAQ,MAAM,kBAAkB,CAAC;;;;;;kDAE7C,8OAAC;wCAAK,WAAU;;4CAAgE;4CAC5E,QAAQ,OAAO,QAAQ;;;;;;;;;;;;;0CAI7B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDACb,iBAAiB,QAAQ;;;;;;kDAE5B,8OAAC;wCAAK,WAAU;kDACb,QAAQ;;;;;;;;;;;;;;;;;;kCAKf,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCAAqC,QAAQ;;;;;;;;;;;;;;;;;;;;;;;AAKpE;uCAEe","debugId":null}},
    {"offset": {"line": 1756, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/app/actions/convertCurrency.ts"],"sourcesContent":["'use server';\n\nexport async function convertCurrency(\n  amount: number,\n  from: string,\n  to: string\n) {\n  try {\n    // Using a free API: exchangerate.host (no API key needed)\n    const res = await fetch(\n      `https://api.exchangerate.host/convert?from=${from}&to=${to}&amount=${amount}`\n    );\n\n    if (!res.ok) {\n      throw new Error('Failed to fetch conversion rate');\n    }\n\n    const data = await res.json();\n    return { result: data.result as number };\n  } catch (error) {\n    console.error('Currency conversion error:', error);\n    return { error: 'Unable to convert currency right now' };\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAEsB,kBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 1768, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/arman/OneDrive/Desktop/expence-tracker/expence-tracker/components/CurrencyConverter.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { convertCurrency } from '@/app/actions/convertCurrency';\n\nexport default function CurrencyConverter() {\n  const [amount, setAmount] = useState<number>(1);\n  const [from, setFrom] = useState('USD');\n  const [to, setTo] = useState('INR');\n  const [converted, setConverted] = useState<number | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const handleConvert = async () => {\n    setLoading(true);\n    const { result, error } = await convertCurrency(amount, from, to);\n    if (result) setConverted(result);\n    if (error) alert(error);\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md\">\n      <h2 className=\"text-lg font-bold mb-3\">üí± Currency Converter</h2>\n\n      <div className=\"flex items-center gap-2 mb-2\">\n        <input\n          type=\"number\"\n          value={amount}\n          onChange={(e) => setAmount(Number(e.target.value))}\n          className=\"border px-2 py-1 rounded w-28 dark:bg-gray-700 dark:text-white\"\n        />\n        <select\n          value={from}\n          onChange={(e) => setFrom(e.target.value)}\n          className=\"border px-2 py-1 rounded dark:bg-gray-700 dark:text-white\"\n        >\n          <option value=\"USD\">USD</option>\n          <option value=\"INR\">INR</option>\n          <option value=\"EUR\">EUR</option>\n          <option value=\"GBP\">GBP</option>\n        </select>\n        <span className=\"text-lg\">‚û°</span>\n        <select\n          value={to}\n          onChange={(e) => setTo(e.target.value)}\n          className=\"border px-2 py-1 rounded dark:bg-gray-700 dark:text-white\"\n        >\n          <option value=\"INR\">INR</option>\n          <option value=\"USD\">USD</option>\n          <option value=\"EUR\">EUR</option>\n          <option value=\"GBP\">GBP</option>\n        </select>\n      </div>\n\n      <button\n        onClick={handleConvert}\n        disabled={loading}\n        className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n      >\n        {loading ? 'Converting...' : 'Convert'}\n      </button>\n\n      {converted !== null && (\n        <div className=\"mt-3 text-green-600 dark:text-green-400 font-semibold\">\n          {amount} {from} = {converted.toFixed(2)} {to}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAS;IAC7C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,IAAI,MAAM,GAAG,IAAA,iNAAQ,EAAC;IAC7B,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgB;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,gBAAgB;QACpB,WAAW;QACX,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,yKAAe,EAAC,QAAQ,MAAM;QAC9D,IAAI,QAAQ,aAAa;QACzB,IAAI,OAAO,MAAM;QACjB,WAAW;IACb;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAyB;;;;;;0BAEvC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,UAAU,OAAO,EAAE,MAAM,CAAC,KAAK;wBAChD,WAAU;;;;;;kCAEZ,8OAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wBACvC,WAAU;;0CAEV,8OAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,8OAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,8OAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,8OAAC;gCAAO,OAAM;0CAAM;;;;;;;;;;;;kCAEtB,8OAAC;wBAAK,WAAU;kCAAU;;;;;;kCAC1B,8OAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,MAAM,EAAE,MAAM,CAAC,KAAK;wBACrC,WAAU;;0CAEV,8OAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,8OAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,8OAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,8OAAC;gCAAO,OAAM;0CAAM;;;;;;;;;;;;;;;;;;0BAIxB,8OAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;0BAET,UAAU,kBAAkB;;;;;;YAG9B,cAAc,sBACb,8OAAC;gBAAI,WAAU;;oBACZ;oBAAO;oBAAE;oBAAK;oBAAI,UAAU,OAAO,CAAC;oBAAG;oBAAE;;;;;;;;;;;;;AAKpD","debugId":null}}]
}